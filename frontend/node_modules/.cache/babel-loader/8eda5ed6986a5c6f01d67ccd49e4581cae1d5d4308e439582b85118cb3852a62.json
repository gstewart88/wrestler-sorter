{"ast":null,"code":"var _jsxFileName = \"/Users/graemestewart/Developer/wrestler-sorter/frontend/src/pages/Home.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/Home.js\n\nimport React, { useState, useEffect } from 'react';\nimport CompanyFilter from '../components/CompanyFilter';\nimport ComparisonPrompt from '../components/ComparisonPrompt';\nimport fordJohnsonSort from '../utils/fordJohnsonSort';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  const [wrestlers, setWrestlers] = useState([]);\n  const [companies, setCompanies] = useState([]);\n  const [selectedCompanies, setSelectedCompanies] = useState([]);\n\n  // Sorting state\n  const [sorting, setSorting] = useState(false);\n  const [currentPair, setCurrentPair] = useState(null);\n  const [awaitingResponse, setAwaiting] = useState(null);\n  const [result, setResult] = useState(null);\n\n  // Fetch roster + unique companies\n  useEffect(() => {\n    fetch('http://localhost:3001/api/wrestlers').then(r => r.json()).then(data => {\n      setWrestlers(data);\n      const unique = [...new Set(data.map(w => w.company))].filter(Boolean);\n      setCompanies(unique);\n    });\n  }, []);\n\n  // Toggle company in filter\n  function toggleCompany(c) {\n    setSelectedCompanies(prev => prev.includes(c) ? prev.filter(x => x !== c) : [...prev, c]);\n  }\n\n  // Filtered wrestlers\n  const filtered = wrestlers.filter(w => selectedCompanies.includes(w.company));\n\n  // Called by handleStart to ask the user to compare two wrestlers\n  function compareUser(a, b) {\n    return new Promise(resolve => {\n      setCurrentPair({\n        a,\n        b\n      });\n      setAwaiting(() => resolve);\n    });\n  }\n\n  // Kick off sorting\n  async function handleStart() {\n    setSorting(true);\n    const sorted = await fordJohnsonSort(filtered, compareUser);\n    setResult(sorted);\n    setSorting(false);\n  }\n\n  // When user picks one in the prompt\n  function handleChoice(chosen) {\n    if (awaitingResponse) {\n      awaitingResponse(chosen);\n      setCurrentPair(null);\n      setAwaiting(null);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Wrestler Sorter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CompanyFilter, {\n      companies: companies,\n      selected: selectedCompanies,\n      onToggle: toggleCompany\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleStart,\n      disabled: !selectedCompanies.length || sorting,\n      style: {\n        marginTop: 16\n      },\n      children: sorting ? 'Sorting…' : 'Start Sorting'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), sorting && currentPair && /*#__PURE__*/_jsxDEV(ComparisonPrompt, {\n      a: currentPair.a,\n      b: currentPair.b,\n      onChoose: handleChoice\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), result && !sorting && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 24\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Your Ranked Roster\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n        children: result.map(w => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [w.name, \" \", /*#__PURE__*/_jsxDEV(\"small\", {\n            children: [\"(\", w.company, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 26\n          }, this)]\n        }, w.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), !sorting && !result && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 24\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Preview (\", filtered.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: filtered.map(w => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [w.name, \" (\", w.company, \")\"]\n        }, w.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"6cjJUh4Qo954xjXSv++OUq2WpXM=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","CompanyFilter","ComparisonPrompt","fordJohnsonSort","jsxDEV","_jsxDEV","Home","_s","wrestlers","setWrestlers","companies","setCompanies","selectedCompanies","setSelectedCompanies","sorting","setSorting","currentPair","setCurrentPair","awaitingResponse","setAwaiting","result","setResult","fetch","then","r","json","data","unique","Set","map","w","company","filter","Boolean","toggleCompany","c","prev","includes","x","filtered","compareUser","a","b","Promise","resolve","handleStart","sorted","handleChoice","chosen","children","fileName","_jsxFileName","lineNumber","columnNumber","selected","onToggle","onClick","disabled","length","style","marginTop","onChoose","name","_c","$RefreshReg$"],"sources":["/Users/graemestewart/Developer/wrestler-sorter/frontend/src/pages/Home.js"],"sourcesContent":["// frontend/src/pages/Home.js\n\nimport React, { useState, useEffect } from 'react';\nimport CompanyFilter from '../components/CompanyFilter';\nimport ComparisonPrompt from '../components/ComparisonPrompt';\nimport fordJohnsonSort from '../utils/fordJohnsonSort';\n\nexport default function Home() {\n  const [wrestlers, setWrestlers] = useState([]);\n  const [companies, setCompanies] = useState([]);\n  const [selectedCompanies, setSelectedCompanies] = useState([]);\n\n  // Sorting state\n  const [sorting, setSorting]           = useState(false);\n  const [currentPair, setCurrentPair]   = useState(null);\n  const [awaitingResponse, setAwaiting] = useState(null);\n  const [result, setResult]             = useState(null);\n\n  // Fetch roster + unique companies\n  useEffect(() => {\n    fetch('http://localhost:3001/api/wrestlers')\n      .then(r => r.json())\n      .then(data => {\n        setWrestlers(data);\n        const unique = [...new Set(data.map(w => w.company))].filter(Boolean);\n        setCompanies(unique);\n      });\n  }, []);\n\n  // Toggle company in filter\n  function toggleCompany(c) {\n    setSelectedCompanies(prev =>\n      prev.includes(c) ? prev.filter(x => x !== c) : [...prev, c]\n    );\n  }\n\n  // Filtered wrestlers\n  const filtered = wrestlers.filter(w =>\n    selectedCompanies.includes(w.company)\n  );\n\n  // Called by handleStart to ask the user to compare two wrestlers\n  function compareUser(a, b) {\n    return new Promise(resolve => {\n      setCurrentPair({ a, b });\n      setAwaiting(() => resolve);\n    });\n  }\n\n  // Kick off sorting\n  async function handleStart() {\n    setSorting(true);\n    const sorted = await fordJohnsonSort(filtered, compareUser);\n    setResult(sorted);\n    setSorting(false);\n  }\n\n  // When user picks one in the prompt\n  function handleChoice(chosen) {\n    if (awaitingResponse) {\n      awaitingResponse(chosen);\n      setCurrentPair(null);\n      setAwaiting(null);\n    }\n  }\n\n  return (\n    <div>\n      <h1>Wrestler Sorter</h1>\n      <CompanyFilter\n        companies={companies}\n        selected={selectedCompanies}\n        onToggle={toggleCompany}\n      />\n\n      <button\n        onClick={handleStart}\n        disabled={!selectedCompanies.length || sorting}\n        style={{ marginTop: 16 }}\n      >\n        {sorting ? 'Sorting…' : 'Start Sorting'}\n      </button>\n\n      {/* Comparison Overlay */}\n      {sorting && currentPair && (\n        <ComparisonPrompt\n          a={currentPair.a}\n          b={currentPair.b}\n          onChoose={handleChoice}\n        />\n      )}\n\n      {/* Final Results */}\n      {result && !sorting && (\n        <div style={{ marginTop: 24 }}>\n          <h2>Your Ranked Roster</h2>\n          <ol>\n            {result.map(w => (\n              <li key={w.name}>\n                {w.name} <small>({w.company})</small>\n              </li>\n            ))}\n          </ol>\n        </div>\n      )}\n\n      {/* Preview */}\n      {!sorting && !result && (\n        <div style={{ marginTop: 24 }}>\n          <h3>Preview ({filtered.length})</h3>\n          <ul>\n            {filtered.map(w => (\n              <li key={w.name}>{w.name} ({w.company})</li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}